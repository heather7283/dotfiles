#!/bin/sh

if [ -z "$XDG_RUNTIME_DIR" ]; then
    echo "XDG_RUNTIME_DIR is not set"
    exit 1
fi

unset TMUX TMUX_PANE

# make sure there's only 1 popup at the same time
lockfile="${XDG_RUNTIME_DIR}/foot-popup.lock"

flock -E 101 -on "$lockfile" \
    foot-layer-shell \
    --app-id foot-popup \
    --window-size-pixels 720x504 \
    --override colors-dark.background=343F44 \
    --override colors-dark.sixel0=343F44 \
    --override layer-shell.keyboard-interactivity=1 \
    --override layer-shell.layer=3 \
    "$@"

